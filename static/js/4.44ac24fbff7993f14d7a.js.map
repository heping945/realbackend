{"version":3,"sources":["webpack:///src/components/post/PostAdd.vue","webpack:///./src/components/post/PostAdd.vue?b34a","webpack:///./src/components/post/PostAdd.vue","webpack:///./node_modules/_core-js@2.6.9@core-js/library/modules/_object-to-array.js","webpack:///./node_modules/_core-js@2.6.9@core-js/library/modules/es7.object.values.js","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/values.js","webpack:///./node_modules/_core-js@2.6.9@core-js/library/fn/object/values.js"],"names":["PostAdd","name","data","isDisable","defaultData","codestylelist","categoryList","tagvalue","tagseleted","tagList","img_file","post","title","body","body_md","category","codestyle","tags","reproduce","reproduce_source","can_comment","ruleValidate","required","message","trigger","type","components","SuspensionPanel","created","this","initcategorydata","inittagdata","mounted","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","currentpost","wrap","_context","prev","next","_axios_0_19_0_axios_default","get","sent","storage","console","log","abrupt","stop","methods","_this2","Object","api","then","res","results","catch","err","_this3","addpost","_this4","setTimeout","$refs","validate","valid","$Message","info","content","duration","$router","push","params","id","response","e","errmsg","values_default","error","$imgAdd","pos","$file","_this5","formdata","FormData","append","url","md","$img2Url","img","$imgDel","saveMavon","value","render","set","change_render_value","changezindex","status","postadd","style","zIndex","addtag","_this6","$Modal","confirm","h","props","autofocus","placeholder","clearable","maxlength","on","input","val","onOk","success","unshift","warning","onCancel","back","window","history","post_PostAdd","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","xs","sm","lg","staticStyle","text-align","_v","click","model","rules","prop","callback","$$v","$set","trim","expression","subfield","defaultOpen","codeStyle","boxShadow","fullScreen","save","change","imgAdd","imgDel","_l","item","index","key","_s","multiple","max-tag-count","margin","long","label","size","slot","disabled","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","DESCRIPTORS","getKeys","toIObject","isEnum","f","module","exports","isEntries","it","O","keys","length","i","result","call","$export","$values","S","values","default","__esModule"],"mappings":"mOAuFAA,GACAC,KAAA,UACAC,KAFA,WAGA,OACAC,WAAA,EACAC,YAAA,OACAC,iBACAC,gBACAC,SAAA,GACAC,cACAC,WACAC,YACAC,MACAC,MAAA,GACAC,KAAA,GACAC,QAAA,GACAC,SAAA,GACAC,UAAA,UACAC,QACAC,WAAA,EACAC,iBAAA,GACAC,aAAA,GAEAC,cACAT,QACAU,UAAA,EAAAC,QAAA,QAAAC,QAAA,SAEAV,UACAQ,UAAA,EAAAC,QAAA,SAAAC,QAAA,SAEAT,WAEAO,UAAA,EAAAC,QAAA,QAAAC,QAAA,SAAAC,KAAA,cAKAC,YACAC,kBAAA,GAEAC,QAxCA,WAyCAC,KAAAC,mBACAD,KAAAE,eAEAC,QA5CA,WA4CA,IAAAC,EAAAJ,KAAA,OAAAK,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAtB,EAAAuB,EAAA,OAAAJ,EAAAC,EAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACAC,EAAAR,EAAAS,IAAA,kCADA,UACA7B,EADAyB,EAAAK,KAEAb,EAAA5B,cAAAW,EAAAd,KAAAc,UACAuB,EAAAQ,EAAA,EAAAF,IAAA,eACAG,QAAAC,IAAA,iBAAAV,IACAA,EALA,CAAAE,EAAAE,KAAA,SAMAV,EAAAtB,KAAAG,QAAAyB,EANAE,EAAAE,KAAA,wBAAAF,EAAAS,OAAA,mCAAAT,EAAAU,SAAAb,EAAAL,KAAAC,IAWAkB,SAEAtB,iBAFA,WAEA,IAAAuB,EAAAxB,KACMyB,OAAAC,EAAA,EAAAD,KAANE,KAAA,SAAAC,GACAJ,EAAA/C,aAAAmD,EAAAvD,KAAAwD,QACAV,QAAAC,IAAAQ,EAAAvD,KAAA,uBACAyD,MAAA,SAAAC,GACAZ,QAAAC,IAAAW,MAIA7B,YAXA,WAWA,IAAA8B,EAAAhC,KACMyB,OAAAC,EAAA,EAAAD,KAANE,KAAA,SAAAC,GACAI,EAAApD,QAAAgD,EAAAvD,KAAAwD,QACAV,QAAAC,IAAAQ,EAAAvD,KAAA,2BACAyD,MAAA,SAAAC,GACAZ,QAAAC,IAAAW,MAIAE,QApBA,WAoBA,IAAAC,EAAAlC,KACAA,KAAA1B,WAAA,EACA6D,WAAA,WACAD,EAAA5D,WAAA,GACA,KACA0B,KAAAoC,MAAAtD,KAAAuD,SAAA,SAAAC,GACAA,EAIYb,OAAAC,EAAA,EAAAD,CACZS,EAAApD,MACA6C,KAAA,SAAAC,GACAM,EAAAK,SAAAC,MACAC,QAAA,mBACAC,SAAA,IAEAR,EAAA5D,WAAA,EACA6D,WAAA,WACAD,EAAAS,QAAAC,MAAAxE,KAAA,aAAAyE,QAAAC,GAAAlB,EAAAvD,KAAAyE,OACA,OAEAhB,MAAA,SAAAC,GACAZ,QAAAC,IAAAW,EAAAgB,UACA,IAAAC,EAAAjB,EAAAgB,SAAA1E,KACA4E,EAAAC,IAAAF,GAAA,MACAd,EAAAK,SAAAY,MAAAF,KAIAf,EAAAK,SAAAY,MAAA,mBAKAC,QAvDA,SAuDAC,EAAAC,GAAA,IAAAC,EAAAvD,KAGAA,KAAAnB,SAAAwE,GAAAC,EACA,IAAAE,EAAA,IAAAC,SACAD,EAAAE,OAAA,MAAAJ,GACM7B,OAAAC,EAAA,EAAAD,CAAN+B,GAAA7B,KAAA,SAAAgC,GASAJ,EAAAnB,MAAAwB,GAAAC,SAAAR,EAAAM,EAAAtF,KAAAyF,OAEAhC,MAAA,SAAAC,GACAwB,EAAAhB,SAAAY,MAAA,oBAGAY,QA5EA,SA4EAV,UACArD,KAAAnB,SAAAwE,IAGAW,UAhFA,SAgFAC,EAAAC,GAEMhD,EAAA,EAANiD,IAAA,cAAAF,GACAjE,KAAAlB,KAAAE,KAAAkF,EACAlE,KAAAlB,KAAAG,QAAAgF,GAGAG,oBAvFA,SAuFAH,EAAAC,GACAlE,KAAAlB,KAAAE,KAAAkF,GAGAG,aA3FA,SA2FAC,EAAAL,GAEAjE,KAAAoC,MAAAmC,QAAAC,MAAAC,OADAH,EACA,IAEA,KAIAI,OAnGA,WAmGA,IAAAC,EAAA3E,KACAA,KAAA4E,OAAAC,SACAX,OAAA,SAAAY,GACA,OAAAA,EAAA,SACAC,OACAd,MAAAU,EAAAjG,SACAsG,WAAA,EACAC,YAAA,aACAC,WAAA,EACAzF,UAAA,EACA0F,UAAA,IAEAC,IACAC,MAAA,SAAAC,GACAX,EAAAjG,SAAA4G,OAKAC,KAAA,WACAZ,EAAAjG,SAEY+C,OAAAC,EAAA,EAAAD,EACZrD,KAAAuG,EAAAjG,WACAiD,KAAA,SAAAC,GACA+C,EAAApC,SAAAiD,QAAA,MAAA5D,EAAAvD,KAAAD,KAAA,QACAuG,EAAA/F,QAAA6G,QAAA7D,EAAAvD,QACAyD,MAAA,SAAAC,GACA4C,EAAApC,SAAAY,MAAApB,EAAAgB,SAAA1E,KAAAD,KAAA,MAGAuG,EAAApC,SAAAmD,QAAA,aAGAC,SAAA,gBAKAC,KA1IA,WA2IAC,OAAAC,QAAAF,UCtReG,GADE7B,OAFP,WAAgB,IAAA8B,EAAAhG,KAAaiG,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,IAAA,UAAAC,YAAA,gCAAAC,OAAiEzD,GAAA,aAAgBqD,EAAA,OAAAA,EAAA,OAAsBI,OAAOC,GAAA,GAAAC,GAAA,GAAA7C,GAAA,EAAA8C,GAAA,KAA+BP,EAAA,QAAAA,EAAA,OAAuBQ,aAAaC,aAAA,YAAuBT,EAAA,MAAAH,EAAAa,GAAA,sBAAAb,EAAAa,GAAA,KAAAV,EAAA,MAAAH,EAAAa,GAAA,KAAAV,EAAA,KAAAA,EAAA,UAA8FI,OAAO3G,KAAA,WAAiBwF,IAAK0B,MAAAd,EAAAJ,QAAkBI,EAAAa,GAAA,oBAAAb,EAAAa,GAAA,KAAAV,EAAA,OAAmDI,OAAOC,GAAA,EAAAC,GAAA,EAAA7C,GAAA,GAAA8C,GAAA,MAA+BP,EAAA,QAAaE,IAAA,OAAAE,OAAkBQ,MAAAf,EAAAlH,KAAAkI,MAAAhB,EAAAxG,gBAA2C2G,EAAA,YAAiBI,OAAOU,KAAA,WAAgBd,EAAA,SAAcI,OAAOtB,YAAA,aAAAC,UAAA,GAAAzF,SAAA,GAAA0F,UAAA,IAAuE4B,OAAQ9C,MAAA+B,EAAAlH,KAAA,MAAAoI,SAAA,SAAAC,GAAgDnB,EAAAoB,KAAApB,EAAAlH,KAAA,yBAAAqI,IAAAE,OAAAF,IAAwEG,WAAA,iBAA0B,GAAAtB,EAAAa,GAAA,KAAAV,EAAA,YAAiCI,OAAOU,KAAA,aAAkBd,EAAA,WAAAA,EAAA,gBAAmCE,IAAA,KAAAE,OAAgBgB,UAAA,EAAAC,YAAAxB,EAAAzH,YAAAkJ,UAAAzB,EAAAlH,KAAAK,UAAAuI,WAAA,GAAgGtC,IAAKuC,WAAA3B,EAAA3B,aAAAuD,KAAA5B,EAAAhC,UAAA6D,OAAA7B,EAAA5B,oBAAA0D,OAAA9B,EAAA5C,QAAA2E,OAAA/B,EAAAjC,SAA8HgD,OAAQ9C,MAAA+B,EAAAlH,KAAA,QAAAoI,SAAA,SAAAC,GAAkDnB,EAAAoB,KAAApB,EAAAlH,KAAA,UAAAqI,IAAmCG,WAAA,mBAA4B,KAAAtB,EAAAa,GAAA,KAAAV,EAAA,YAAmCI,OAAOU,KAAA,eAAoBd,EAAA,UAAeI,OAAOtB,YAAA,WAAwB8B,OAAQ9C,MAAA+B,EAAAlH,KAAA,UAAAoI,SAAA,SAAAC,GAAoDnB,EAAAoB,KAAApB,EAAAlH,KAAA,YAAAqI,IAAqCG,WAAA,mBAA8BtB,EAAAgC,GAAAhC,EAAA,uBAAAiC,EAAAC,GAAiD,OAAA/B,EAAA,UAAoBgC,IAAAD,EAAA3B,OAAiBtC,MAAAgE,KAAcjC,EAAAa,GAAAb,EAAAoC,GAAAH,QAAyB,OAAAjC,EAAAa,GAAA,KAAAV,EAAA,YAAoCI,OAAOU,KAAA,cAAmBd,EAAA,UAAeI,OAAOtB,YAAA,WAAwB8B,OAAQ9C,MAAA+B,EAAAlH,KAAA,SAAAoI,SAAA,SAAAC,GAAmDnB,EAAAoB,KAAApB,EAAAlH,KAAA,WAAAqI,IAAoCG,WAAA,kBAA6BtB,EAAAgC,GAAAhC,EAAA,sBAAAiC,GAA0C,OAAA9B,EAAA,UAAoBgC,IAAAF,EAAAnF,GAAAyD,OAAmBtC,MAAAgE,EAAAnF,MAAiBkD,EAAAa,GAAAb,EAAAoC,GAAAH,EAAA7J,WAA8B,OAAA4H,EAAAa,GAAA,KAAAV,EAAA,YAAoCI,OAAOU,KAAA,SAAcd,EAAA,UAAeI,OAAO8B,SAAA,GAAAC,gBAAA,EAAArD,YAAA,WAAwD8B,OAAQ9C,MAAA+B,EAAAlH,KAAA,KAAAoI,SAAA,SAAAC,GAA+CnB,EAAAoB,KAAApB,EAAAlH,KAAA,OAAAqI,IAAgCG,WAAA,cAAyBtB,EAAAgC,GAAAhC,EAAA,iBAAAiC,GAAqC,OAAA9B,EAAA,UAAoBgC,IAAAF,EAAAhE,MAAAsC,OAAsBtC,MAAAgE,EAAAnF,MAAiBkD,EAAAa,GAAAb,EAAAoC,GAAAH,EAAA7J,WAA8B,OAAA4H,EAAAa,GAAA,KAAAV,EAAA,KAA6BQ,aAAa4B,OAAA,kBAAyBpC,EAAA,UAAeI,OAAOiC,KAAA,IAAUpD,IAAK0B,MAAAd,EAAAtB,UAAoBsB,EAAAa,GAAA,qBAAAb,EAAAa,GAAA,KAAAV,EAAA,YAAyDI,OAAOU,KAAA,cAAAwB,MAAA,YAAuCtC,EAAA,YAAiBI,OAAOmC,KAAA,SAAe3B,OAAQ9C,MAAA+B,EAAAlH,KAAA,YAAAoI,SAAA,SAAAC,GAAsDnB,EAAAoB,KAAApB,EAAAlH,KAAA,cAAAqI,IAAuCG,WAAA,sBAAgCnB,EAAA,QAAaI,OAAOoC,KAAA,QAAcA,KAAA,SAAa3C,EAAAa,GAAA,QAAAb,EAAAa,GAAA,KAAAV,EAAA,QAAwCI,OAAOoC,KAAA,SAAeA,KAAA,UAAc3C,EAAAa,GAAA,eAAAb,EAAAa,GAAA,KAAAV,EAAA,YAAmDI,OAAOkC,MAAA,YAAkBtC,EAAA,YAAiBI,OAAOmC,KAAA,SAAe3B,OAAQ9C,MAAA+B,EAAAlH,KAAA,UAAAoI,SAAA,SAAAC,GAAoDnB,EAAAoB,KAAApB,EAAAlH,KAAA,YAAAqI,IAAqCG,WAAA,oBAA8BnB,EAAA,QAAaI,OAAOoC,KAAA,QAAcA,KAAA,SAAa3C,EAAAa,GAAA,QAAAb,EAAAa,GAAA,KAAAV,EAAA,QAAwCI,OAAOoC,KAAA,SAAeA,KAAA,UAAc3C,EAAAa,GAAA,eAAAb,EAAAa,GAAA,KAAAb,EAAAlH,KAAA,UAAAqH,EAAA,YAAwEI,OAAOU,KAAA,SAAcd,EAAA,SAAcI,OAAO3G,KAAA,MAAAsF,UAAA,GAAAD,YAAA,aAAsD8B,OAAQ9C,MAAA+B,EAAAlH,KAAA,iBAAAoI,SAAA,SAAAC,GAA2DnB,EAAAoB,KAAApB,EAAAlH,KAAA,mBAAAqI,IAA4CG,WAAA,4BAAqC,GAAAnB,EAAA,YAAqBI,OAAOU,KAAA,SAAcd,EAAA,SAAcI,OAAO3G,KAAA,MAAAgJ,SAAA,GAAA1D,UAAA,GAAAD,YAAA,aAAoE8B,OAAQ9C,MAAA+B,EAAAlH,KAAA,iBAAAoI,SAAA,SAAAC,GAA2DnB,EAAAoB,KAAApB,EAAAlH,KAAA,mBAAAqI,IAA4CG,WAAA,4BAAqC,GAAAtB,EAAAa,GAAA,KAAAV,EAAA,UAA+BI,OAAO3G,KAAA,UAAA4I,KAAA,GAAAI,SAAA5C,EAAA1H,WAAoD8G,IAAK0B,MAAA,SAAA+B,GAAyB,OAAA7C,EAAA/D,QAAA,YAA6B+D,EAAAa,GAAA,sBAAAb,EAAAa,GAAA,KAAAV,EAAA,wBAE78H2C,oBCChC,IAcAC,EAdyBC,EAAQ,OAcjCC,CACE9K,EACA4H,GATF,EAVA,SAAAmD,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,gCC1BhC,IAAAK,EAAkBJ,EAAQ,QAC1BK,EAAcL,EAAQ,QACtBM,EAAgBN,EAAQ,QACxBO,EAAaP,EAAQ,QAAeQ,EACpCC,EAAAC,QAAA,SAAAC,GACA,gBAAAC,GAOA,IANA,IAKAzB,EALA0B,EAAAP,EAAAM,GACAE,EAAAT,EAAAQ,GACAE,EAAAD,EAAAC,OACAC,EAAA,EACAC,KAEAF,EAAAC,GACA7B,EAAA2B,EAAAE,KACAZ,IAAAG,EAAAW,KAAAL,EAAA1B,IACA8B,EAAArH,KAAA+G,GAAAxB,EAAA0B,EAAA1B,IAAA0B,EAAA1B,IAGA,OAAA8B,0BCjBA,IAAAE,EAAcnB,EAAQ,QACtBoB,EAAcpB,EAAQ,OAARA,EAA4B,GAE1CmB,IAAAE,EAAA,UACAC,OAAA,SAAAV,GACA,OAAAQ,EAAAR,4BCNAH,EAAAC,SAAkBa,QAAYvB,EAAQ,QAAkCwB,YAAA,yBCAxExB,EAAQ,QACRS,EAAAC,QAAiBV,EAAQ,QAAqBvH,OAAA6I","file":"static/js/4.44ac24fbff7993f14d7a.js","sourcesContent":["<template>\n  <div id=\"postadd\" class=\"commonpositiontop p-container\" ref=\"postadd\">\n    <Row>\n      <Col :xs=\"24\" :sm=\"24\" :md=\"0\" :lg=\"0\">\n        <Card>\n          <div style=\"text-align:center\">\n            <h3>此设备不支持创建文章请切换大设备</h3>\n            <br>\n            <p>\n              <Button type=\"primary\" @click=\"back\">倒退</Button>\n            </p>\n          </div>\n        </Card>\n      </Col>\n      <Col :xs=\"0\" :sm=\"0\" :md=\"24\" :lg=\"24\">\n        <Form :model=\"post\" ref=\"post\" :rules=\"ruleValidate\">\n          <FormItem prop=\"title\">\n            <Input v-model.trim=\"post.title\" placeholder=\"请输入文章标题...\" clearable required :maxlength='64'></Input>\n          </FormItem>\n\n          <FormItem prop=\"body_md\">\n            <article>\n              <mavon-editor v-model=\"post.body_md\" :subfield=\"false\" :defaultOpen=\"defaultData\"\n                            :codeStyle=\"post.codestyle\" :boxShadow=\"false\" @fullScreen=\"changezindex\"\n                            @save=\"saveMavon\" @change=\"change_render_value\" ref=md @imgAdd=\"$imgAdd\" @imgDel=\"$imgDel\"\n              />\n            </article>\n          </FormItem>\n          <FormItem prop=\"codestyle\">\n            <Select v-model=\"post.codestyle\" placeholder=\"请选择代码风格\">\n              <Option v-for=\"(item,index) in codestylelist\" :value=\"item\" :key=\"index\">{{ item}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"category\">\n            <Select v-model=\"post.category\" placeholder=\"请选择文章分类\">\n              <Option v-for=\"item in categoryList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"tag\">\n            <Select v-model=\"post.tags\" multiple :max-tag-count=\"4\" placeholder=\"请选择文章标签\">\n              <Option v-for=\"item in tagList\" :value=\"item.id\" :key=\"item.value\">{{ item.name }}</Option>\n            </Select>\n          </FormItem>\n\n          <p style=\"margin: -15px 0 15px\">\n            <Button @click=\"addtag\" long>没有标签？点击增加标签</Button>\n          </p>\n\n          <FormItem prop=\"can_comment\" label=\"是否开启评论\">\n            <i-switch v-model=\"post.can_comment\" size=\"large\">\n              <span slot=\"open\">On</span>\n              <span slot=\"close\">Off</span>\n            </i-switch>\n          </FormItem>\n          <FormItem label=\"是否来自转载\">\n            <i-switch v-model=\"post.reproduce\" size=\"large\">\n              <span slot=\"open\">On</span>\n              <span slot=\"close\">Off</span>\n            </i-switch>\n          </FormItem>\n\n          <FormItem prop=\"url\" v-if=\"post.reproduce\">\n            <Input type=\"url\" v-model=\"post.reproduce_source\" clearable placeholder=\"请输入转载来源地址\">\n            </Input>\n          </FormItem>\n          <FormItem prop=\"url\" v-else>\n            <Input type=\"url\" v-model=\"post.reproduce_source\" disabled clearable placeholder=\"请输入转载来源地址\">\n            </Input>\n          </FormItem>\n          <Button type=\"primary\" @click=\"addpost('post')\" long :disabled=\"isDisable\">创建文章</Button>\n        </Form>\n      </Col>\n    </Row>\n    <SuspensionPanel></SuspensionPanel>\n  </div>\n</template>\n\n<script>\n  import SuspensionPanel from '../utils/SuspensionPanel'\n  import {getcategorylist} from '../../api/api'\n  import {createPost} from '../../api/api'\n  import {createTag} from '../../api/api'\n  import {gettaglist} from '../../api/api'\n  import {postimgupload} from '../../api/api'\n  import storage from '../../assets/js/storage'\n  import Axios from 'axios'\n\n  export default {\n    name: \"PostAdd\",\n    data() {\n      return {\n        isDisable: false,\n        defaultData: \"edit\",\n        codestylelist: [],\n        categoryList: [],\n        tagvalue: '',\n        tagseleted: [],\n        tagList: [],\n        img_file: {},\n        post: {\n          title: '',\n          body: '',\n          body_md: \"\",\n          category: '',\n          codestyle: 'monokai',\n          tags: [],\n          reproduce: false,\n          reproduce_source: '',\n          can_comment: true,\n        },\n        ruleValidate: {\n          title: [\n            {required: true, message: '请输入标题', trigger: 'blur'}\n          ],\n          body_md: [\n            {required: true, message: '正文不能为空', trigger: 'blur'}\n          ],\n          category: [\n            // iview 验证数据类型为string  所以  number值要加 type:'number'\n            {required: true, message: '请选择分类', trigger: 'change', type: 'number'}\n          ],\n        },\n      }\n    },\n    components: {\n      SuspensionPanel\n    },\n    created() {\n      this.initcategorydata();\n      this.inittagdata()\n    },\n    async mounted() {\n      let codestyle = await Axios.get('../../../static/codestyle.json')\n      this.codestylelist = codestyle.data.codestyle;\n      let currentpost = storage.get('currentpost');\n      console.log('currentpost---', currentpost)\n      if (currentpost) {\n        this.post.body_md = currentpost\n      } else {\n        return\n      }\n    },\n    methods: {\n      // 初始化 分类数据\n      initcategorydata() {\n        getcategorylist({}).then(res => {\n          this.categoryList = res.data.results\n          console.log(res.data, 'test1111111111111')\n        }).catch(err => {\n          console.log(err)\n        })\n      },\n      //初始化标签数据\n      inittagdata() {\n        gettaglist({}).then(res => {\n          this.tagList = res.data.results\n          console.log(res.data, 'test22222222222222222')\n        }).catch(err => {\n          console.log(err)\n        })\n      },\n      // 提交文章   包含数据验证\n      addpost() {\n        this.isDisable = true\n        setTimeout(() => {\n          this.isDisable = false\n        }, 1000);\n        this.$refs.post.validate((valid) => {\n          if (valid) {\n            // 验证成功, 发送数据\n            // this.$Message.success('Success!');\n            {\n              createPost(\n                this.post\n              ).then(res => {\n                this.$Message.info({\n                  content: '文章添加成功,1s后返回文章页面',\n                  duration: 1\n                });\n                this.isDisable = true;\n                setTimeout(() => {\n                  this.$router.push({name: 'postdetail', params: {id: res.data.id}})\n                }, 1000);\n\n              }).catch(err => {\n                console.log(err.response)\n                var e = err.response.data\n                let errmsg = Object.values(e)[0][0]\n                this.$Message.error(errmsg);\n              })\n            }\n          } else {\n            this.$Message.error('请检查文章字段验证！!！');\n          }\n        })\n      },\n      // 绑定@imgAdd event\n      $imgAdd(pos, $file) {\n        // 第一步.将图片上传到服务器.\n        // 缓存图片信息\n        this.img_file[pos] = $file;\n        var formdata = new FormData();\n        formdata.append('img', $file);\n        postimgupload(formdata).then((url) => {\n          // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n          /**\n           * $vm 指为mavonEditor实例，可以通过如下两种方式获取\n           * 1. 通过引入对象获取: `import {mavonEditor} from ...` 等方式引入后，`$vm`为`mavonEditor`\n           * 2. 通过$refs获取: html声明ref : `<mavon-editor ref=md ></mavon-editor>，`$vm`为 `this.$refs.md`\n           */\n          //   alert(1)\n          // console.log(url)\n          this.$refs.md.$img2Url(pos, url.data.img);\n          // $vm.$img2Url(pos, url.data.img);\n        }).catch(err => {\n          this.$Message.error('格式或类型错误，请重新上传')\n        })\n      },\n      $imgDel(pos) {\n        delete this.img_file[pos];\n      },\n      // 保存postvalue本地存储\n      saveMavon(value, render) {\n\n        storage.set('currentpost', value);\n        this.post.body = render;\n        this.post.body_md = value;\n      },\n      // body,body_md 内容改变时的render值\n      change_render_value(value, render) {\n        this.post.body = render;\n      },\n      // 改变全屏状态下zindex使覆盖导航条\n      changezindex(status, value) {\n        if (status) {\n          this.$refs.postadd.style.zIndex = 260\n        } else {\n          this.$refs.postadd.style.zIndex = 234\n        }\n      },\n      // 增加标签\n      addtag() {\n        this.$Modal.confirm({\n          render: (h) => {\n            return h('Input', {\n              props: {\n                value: this.tagvalue,\n                autofocus: true,\n                placeholder: '请输入标签名字...',\n                clearable: true,\n                required: true,\n                maxlength: 12,\n              },\n              on: {\n                input: (val) => {\n                  this.tagvalue = val;\n                }\n              },\n            })\n          },\n          onOk: () => {\n            if (this.tagvalue) {\n              // alert(this.tagvalue);\n              createTag({\n                name: this.tagvalue\n              }).then(res => {\n                this.$Message.success(\"标签:\" + res.data.name + \"创建成功\")\n                this.tagList.unshift(res.data)\n              }).catch(err => {\n                this.$Message.error(err.response.data.name[0])\n              })\n            } else {\n              this.$Message.warning(\"输入内容不可为空\")\n            }\n          },\n          onCancel: () => {\n            // this.$Message.info('Clicked cancel');\n          }\n        })\n      },\n      back() {\n        window.history.back()\n      },\n    }\n\n  }\n</script>\n\n<style scoped>\n  #postadd {\n    z-index: 234;\n\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/post/PostAdd.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"postadd\",staticClass:\"commonpositiontop p-container\",attrs:{\"id\":\"postadd\"}},[_c('Row',[_c('Col',{attrs:{\"xs\":24,\"sm\":24,\"md\":0,\"lg\":0}},[_c('Card',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h3',[_vm._v(\"此设备不支持创建文章请切换大设备\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.back}},[_vm._v(\"倒退\")])],1)])])],1),_vm._v(\" \"),_c('Col',{attrs:{\"xs\":0,\"sm\":0,\"md\":24,\"lg\":24}},[_c('Form',{ref:\"post\",attrs:{\"model\":_vm.post,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入文章标题...\",\"clearable\":\"\",\"required\":\"\",\"maxlength\":64},model:{value:(_vm.post.title),callback:function ($$v) {_vm.$set(_vm.post, \"title\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"post.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"body_md\"}},[_c('article',[_c('mavon-editor',{ref:\"md\",attrs:{\"subfield\":false,\"defaultOpen\":_vm.defaultData,\"codeStyle\":_vm.post.codestyle,\"boxShadow\":false},on:{\"fullScreen\":_vm.changezindex,\"save\":_vm.saveMavon,\"change\":_vm.change_render_value,\"imgAdd\":_vm.$imgAdd,\"imgDel\":_vm.$imgDel},model:{value:(_vm.post.body_md),callback:function ($$v) {_vm.$set(_vm.post, \"body_md\", $$v)},expression:\"post.body_md\"}})],1)]),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"codestyle\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择代码风格\"},model:{value:(_vm.post.codestyle),callback:function ($$v) {_vm.$set(_vm.post, \"codestyle\", $$v)},expression:\"post.codestyle\"}},_vm._l((_vm.codestylelist),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"category\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择文章分类\"},model:{value:(_vm.post.category),callback:function ($$v) {_vm.$set(_vm.post, \"category\", $$v)},expression:\"post.category\"}},_vm._l((_vm.categoryList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"tag\"}},[_c('Select',{attrs:{\"multiple\":\"\",\"max-tag-count\":4,\"placeholder\":\"请选择文章标签\"},model:{value:(_vm.post.tags),callback:function ($$v) {_vm.$set(_vm.post, \"tags\", $$v)},expression:\"post.tags\"}},_vm._l((_vm.tagList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('p',{staticStyle:{\"margin\":\"-15px 0 15px\"}},[_c('Button',{attrs:{\"long\":\"\"},on:{\"click\":_vm.addtag}},[_vm._v(\"没有标签？点击增加标签\")])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"can_comment\",\"label\":\"是否开启评论\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.post.can_comment),callback:function ($$v) {_vm.$set(_vm.post, \"can_comment\", $$v)},expression:\"post.can_comment\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"是否来自转载\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.post.reproduce),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce\", $$v)},expression:\"post.reproduce\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),(_vm.post.reproduce)?_c('FormItem',{attrs:{\"prop\":\"url\"}},[_c('Input',{attrs:{\"type\":\"url\",\"clearable\":\"\",\"placeholder\":\"请输入转载来源地址\"},model:{value:(_vm.post.reproduce_source),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce_source\", $$v)},expression:\"post.reproduce_source\"}})],1):_c('FormItem',{attrs:{\"prop\":\"url\"}},[_c('Input',{attrs:{\"type\":\"url\",\"disabled\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入转载来源地址\"},model:{value:(_vm.post.reproduce_source),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce_source\", $$v)},expression:\"post.reproduce_source\"}})],1),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"long\":\"\",\"disabled\":_vm.isDisable},on:{\"click\":function($event){return _vm.addpost('post')}}},[_vm._v(\"创建文章\")])],1)],1)],1),_vm._v(\" \"),_c('SuspensionPanel')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c6473962\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/post/PostAdd.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c6473962\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./PostAdd.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PostAdd.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PostAdd.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c6473962\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./PostAdd.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c6473962\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/post/PostAdd.vue\n// module id = null\n// module chunks = ","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.9@core-js/library/modules/_object-to-array.js\n// module id = 3iX7\n// module chunks = 1 4","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.9@core-js/library/modules/es7.object.values.js\n// module id = FbTJ\n// module chunks = 1 4","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/object/values.js\n// module id = MgeX\n// module chunks = 1 4","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.9@core-js/library/fn/object/values.js\n// module id = OZIP\n// module chunks = 1 4"],"sourceRoot":""}