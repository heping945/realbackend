{"version":3,"sources":["webpack:///src/components/post/PostEdit.vue","webpack:///./src/components/post/PostEdit.vue?4a0e","webpack:///./src/components/post/PostEdit.vue","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/get-iterator.js","webpack:///./src/assets/js/authenticate.js","webpack:///./static/pikapi.gif","webpack:///./node_modules/_core-js@2.6.9@core-js/library/fn/get-iterator.js","webpack:///./node_modules/_core-js@2.6.9@core-js/library/modules/core.get-iterator.js"],"names":["PostEdit","name","data","defaultData","isDisable","codestylelist","postdatail","categoryList","author","category","tagvalue","tagseleted","tagList","tag","img_file","post","title","body","body_md","codestyle","tags","reproduce","reproduce_source","can_comment","ruleValidate","required","message","trigger","ifauthor","components","SuspensionPanel","computed","transdatapost","this","$route","params","id","created","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","_axios_0_19_0_axios_default","get","sent","initpostdata","initcategorydata","inittagdata","stop","methods","_this2","Object","api","then","res","console","log","username","verifyauth","newtag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","item","value","push","err","return","catch","$router","_this3","results","_this4","aname","authenticate","ifCurrentUser","$imgAdd","pos","$file","_this5","formdata","FormData","append","url","$refs","md","$img2Url","img","alert","$imgDel","updatepost","_this6","validate","valid","$Message","info","content","duration","setTimeout","response","error","saveMavon","render","storage","set","v","change_render_value","back","window","history","changezindex","status","postedit","style","zIndex","addtag","_this7","$Modal","confirm","h","props","autofocus","placeholder","clearable","maxlength","on","input","val","onOk","success","warning","onCancel","post_PostEdit","_vm","_h","$createElement","_c","_self","ref","staticClass","attrs","xs","sm","lg","staticStyle","text-align","font-size","_v","width","height","src","__webpack_require__","alt","type","click","model","rules","prop","callback","$$v","$set","trim","expression","fontSize","codeStyle","boxShadow","tabSize","fullScreen","change","imgAdd","imgDel","_l","index","key","_s","multiple","max-tag-count","margin","long","label","size","slot","disabled","$event","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","default","__esModule","__WEBPACK_IMPORTED_MODULE_1__main__","__WEBPACK_IMPORTED_MODULE_2_vue_cookies__","n","ifLogin","vue","$store","state","userinfo","postauthor","p","anObject","getIterator","it","iterFn","TypeError","call"],"mappings":"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","file":"static/js/4.d506c75afe35ee88b9a5.js","sourcesContent":["<template>\n  <div id=\"postedit\" class=\"commonpositiontop p-container\" ref=\"postedit\">\n    <Row>\n      <Col :xs=\"24\" :sm=\"24\" :md=\"0\" :lg=\"0\">\n        <Card>\n          <div style=\"text-align:center\">\n            <h3 style=\"font-size: 2rem\">此设备不支持编辑文章请更换大设备</h3>\n            <br>\n            <img src=\"../../../static/pikapi.gif\" alt=\"皮卡丘\" style=\"width:100%;height:auto;\">\n            <br>\n            <br>\n            <p>\n              <Button type=\"primary\" @click=\"back\">倒退</Button>\n            </p>\n          </div>\n        </Card>\n      </Col>\n      <Col :xs=\"0\" :sm=\"0\" :md=\"24\" :lg=\"24\">\n        <Form :model=\"post\" ref=\"post\" :rules=\"ruleValidate\">\n          <FormItem prop=\"title\">\n            <Input v-model.trim=\"post.title\" placeholder=\"请输入文章标题...\" clearable required :maxlength='64'></Input>\n          </FormItem>\n          <FormItem prop=\"body_md\">\n            <article>\n              <mavon-editor v-model=\"post.body_md\" fontSize=\"18px\" :codeStyle=\"post.codestyle\" :boxShadow=\"false\"\n                            @fullScreen=\"changezindex\" :tabSize=\"4\" @change=\"change_render_value\"\n                            ref=md @imgAdd=\"$imgAdd\" @imgDel=\"$imgDel\"/>\n            </article>\n          </FormItem>\n          <FormItem prop=\"codestyle\">\n            <Select v-model=\"post.codestyle\" placeholder=\"请选择代码风格\">\n              <Option v-for=\"(item,index) in codestylelist\" :value=\"item\" :key=\"index\">{{ item}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"category\">\n            <Select v-model=\"category.id\" placeholder=\"请选择文章分类\">\n              <Option v-for=\"item in categoryList\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\n            </Select>\n          </FormItem>\n          <FormItem prop=\"tag\">\n            <Select v-model=\"tagseleted\" multiple :max-tag-count=\"4\" placeholder=\"请选择文章标签\">\n              <Option v-for=\"item in tagList\" :value=\"item.id\" :key=\"item.value\">{{ item.name }}</Option>\n            </Select>\n          </FormItem>\n\n          <p style=\"margin: -15px 0 15px\">\n            <Button @click=\"addtag\" long>没有标签？点击增加标签</Button>\n          </p>\n\n\n          <FormItem prop=\"can_comment\" label=\"是否开启评论\">\n            <i-switch v-model=\"post.can_comment\" size=\"large\">\n              <span slot=\"open\">On</span>\n              <span slot=\"close\">Off</span>\n            </i-switch>\n          </FormItem>\n          <FormItem label=\"是否来自转载\">\n            <i-switch v-model=\"post.reproduce\" size=\"large\">\n              <span slot=\"open\">On</span>\n              <span slot=\"close\">Off</span>\n            </i-switch>\n          </FormItem>\n\n          <FormItem prop=\"url\" v-if=\"post.reproduce\">\n            <Input type=\"url\" v-model=\"post.reproduce_source\" clearable placeholder=\"请输入转载来源地址\">\n              {{post.reproduce_source}}\n            </Input>\n          </FormItem>\n          <FormItem prop=\"url\" v-else>\n            <Input type=\"url\" v-model=\"post.reproduce_source\" disabled clearable placeholder=\"请输入转载来源地址\">\n            </Input>\n          </FormItem>\n          <Button type=\"primary\" @click=\"updatepost('post')\" long :disabled=\"isDisable\">更新文章</Button>\n        </Form>\n      </Col>\n    </Row>\n    <SuspensionPanel></SuspensionPanel>\n  </div>\n</template>\n\n<script>\n  import SuspensionPanel from '../utils/SuspensionPanel'\n  import {getcategorylist} from '../../api/api'\n  import {getPostDetail} from '../../api/api'\n  import {updatePost} from '../../api/api'\n  import {gettaglist} from '../../api/api'\n  import {createTag} from '../../api/api'\n  import {postimgupload} from '../../api/api'\n  import authenticate from '../../assets/js/authenticate'\n  import Axios from 'axios'\n\n  export default {\n    name: \"PostEdit\",\n    data() {\n      return {\n        defaultData: \"edit\",\n        isDisable: false,\n        codestylelist: [],\n        postdatail: {},\n        categoryList: [],\n        author: '',\n        category: [],\n        tagvalue: '',\n        tagseleted: [],\n        tagList: [],\n        tag: [],\n        img_file: {},\n        post: {\n          title: '',\n          body: '',\n          body_md: \"\",\n          category: '',\n          codestyle: '',\n          tags: [],\n          reproduce: false,\n          reproduce_source: '',\n          can_comment: true,\n        },\n        ruleValidate: {\n          title: [\n            {required: true, message: '请输入标题', trigger: 'blur'}\n          ],\n          body_md: [\n            {required: true, message: '正文不能为空', trigger: 'blur'}\n          ],\n        },\n        ifauthor: false\n      }\n    },\n    components: {\n      SuspensionPanel\n    },\n    computed: {\n      transdatapost() {\n        this.post['id'] = this.$route.params.id;\n        this.post.category = this.category.id;\n        this.post.tags = this.tagseleted;\n        if (!this.post.reproduce) {\n          this.post.reproduce_source = null\n        }\n        return this.post;\n      }\n    },\n\n    async created() {\n      let codestyle = await Axios.get('../../../static/codestyle.json')\n      this.initpostdata()\n      this.initcategorydata();\n      this.inittagdata();\n      this.codestylelist = codestyle.data.codestyle;\n    },\n    methods: {\n      // 初始化 文章详情数据\n      initpostdata() {\n        getPostDetail(\n          {id: this.$route.params.id}\n        ).then(\n          res => {\n            console.log('res', res)\n            this.postdatail = res.data\n            this.author = this.postdatail.author.username;\n            //权限认证\n            this.verifyauth()\n            this.post.body = this.postdatail.body\n            this.post.body_md = this.postdatail.body_md\n            this.post.title = this.postdatail.title\n            this.post.codestyle = this.postdatail.codestyle\n            this.category = this.postdatail.category\n            //   从 列表对象获得一个新的可用的  数组列表\n            var newtag = []\n            for (var item of this.postdatail.tags) {\n              newtag.push(item.id)\n            }\n            this.tagseleted = newtag\n            //\n            this.post.reproduce = this.postdatail.reproduce\n            this.post.reproduce_source = this.postdatail.reproduce_source\n            this.post.can_comment = this.postdatail.can_comment\n            console.log('hwllo wolel', this.post)\n          }\n        ).catch(\n          err => {\n            this.$router.push({name: 'index'})\n          }\n        )\n      },\n      // 初始化 分类数据\n      initcategorydata() {\n        getcategorylist({}).then(res => {\n          this.categoryList = res.data.results\n          console.log('this.categoryList--->', this.categoryList);\n        }).catch(err => {\n          console.log(err)\n        })\n      },\n      // 初始化 标签数据\n      inittagdata() {\n        gettaglist({}).then(res => {\n          this.tagList = res.data.results\n          console.log(res);\n        }).catch(err => {\n          console.log(err)\n        })\n      },\n      //验证权限\n      verifyauth() {\n        let aname = this.author\n        if (authenticate.ifCurrentUser(aname)) {\n        } else {\n          this.$router.push({name: 'index'})\n        }\n      },\n      // 绑定@imgAdd event\n      $imgAdd(pos, $file) {\n        // 第一步.将图片上传到服务器.\n        // 缓存图片信息\n        this.img_file[pos] = $file;\n        var formdata = new FormData();\n        formdata.append('img', $file);\n        postimgupload(formdata).then((url) => {\n          // 第二步.将返回的url替换到文本原位置![...](0) -> ![...](url)\n          /**\n           * $vm 指为mavonEditor实例，可以通过如下两种方式获取\n           * 1. 通过引入对象获取: `import {mavonEditor} from ...` 等方式引入后，`$vm`为`mavonEditor`\n           * 2. 通过$refs获取: html声明ref : `<mavon-editor ref=md ></mavon-editor>，`$vm`为 `this.$refs.md`\n           */\n          //   alert(1)\n          // console.log(url)\n          this.$refs.md.$img2Url(pos, url.data.img);\n          // $vm.$img2Url(pos, url.data.img);\n        }).catch(err => {\n          alert(2)\n        })\n      },\n      $imgDel(pos) {\n        delete this.img_file[pos];\n      },\n      // 提交文章   包含数据验证\n      updatepost() {\n        this.$refs.post.validate((valid) => {\n          if (valid) {\n            // 验证成功, 发送数据\n            console.log('现在的数据', this.transdatapost);\n            {\n              updatePost(\n                this.transdatapost\n              ).then(res => {\n                console.log('res----------------', res);\n                this.$Message.info({\n                  content: '文章更新成功,3s后返回文章页面',\n                  duration: 3\n                });\n                this.isDisable = true;\n                setTimeout(() => {\n                  this.$router.push({name: 'postdetail', params: {id: res.data.id}})\n                }, 3000);\n              }).catch(err => {\n                console.log(err.response);\n                console.log(this.post);\n                alert('errors')\n              })\n            }\n          } else {\n            this.$Message.error('请检查文章字段验证！!！');\n          }\n        })\n      },\n      // 保存postvalue本地存储\n      saveMavon(value, render) {\n        storage.set('currentpost', value);\n        var v = storage.get('currentpost');\n        console.log(v)\n        this.post.body = render;\n        this.post.body_md = value;\n      },\n      // body,body_md 内容改变时的render值\n      change_render_value(value, render) {\n        this.post.body = render;\n      },\n      //  小屏幕下  返回上页\n      back() {\n        window.history.back()\n      },\n      // 改变全屏状态下zindex使覆盖导航条\n      changezindex(status, value) {\n        if (status) {\n          this.$refs.postedit.style.zIndex = 260\n        } else {\n          this.$refs.postedit.style.zIndex = 234\n        }\n      },\n      // 增加标签\n      addtag() {\n        this.$Modal.confirm({\n          render: (h) => {\n            return h('Input', {\n              props: {\n                value: this.tagvalue,\n                autofocus: true,\n                placeholder: '请输入标签名字...',\n                clearable: true,\n                required: true,\n                maxlength: 12\n              },\n              on: {\n                input: (val) => {\n                  this.tagvalue = val;\n                }\n              },\n            })\n          },\n          onOk: () => {\n            if (this.tagvalue) {\n              this.$Message.info('Clicked ok');\n              alert(this.tagvalue);\n              createTag({\n                name: this.tagvalue\n              }).then(res => {\n                this.$Message.success(\"标签:\" + res.data.name + \"创建成功\")\n                this.tagList.push(res.data)\n              }).catch(err => {\n                this.$Message.error(err.response.data.name[0])\n              })\n            } else {\n              this.$Message.warning(\"输入内容不可为空\")\n            }\n\n          },\n          onCancel: () => {\n            // this.$Message.info('Clicked cancel');\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #postedit {\n    z-index: 234;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/post/PostEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"postedit\",staticClass:\"commonpositiontop p-container\",attrs:{\"id\":\"postedit\"}},[_c('Row',[_c('Col',{attrs:{\"xs\":24,\"sm\":24,\"md\":0,\"lg\":0}},[_c('Card',[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('h3',{staticStyle:{\"font-size\":\"2rem\"}},[_vm._v(\"此设备不支持编辑文章请更换大设备\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('img',{staticStyle:{\"width\":\"100%\",\"height\":\"auto\"},attrs:{\"src\":require(\"../../../static/pikapi.gif\"),\"alt\":\"皮卡丘\"}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.back}},[_vm._v(\"倒退\")])],1)])])],1),_vm._v(\" \"),_c('Col',{attrs:{\"xs\":0,\"sm\":0,\"md\":24,\"lg\":24}},[_c('Form',{ref:\"post\",attrs:{\"model\":_vm.post,\"rules\":_vm.ruleValidate}},[_c('FormItem',{attrs:{\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入文章标题...\",\"clearable\":\"\",\"required\":\"\",\"maxlength\":64},model:{value:(_vm.post.title),callback:function ($$v) {_vm.$set(_vm.post, \"title\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"post.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"body_md\"}},[_c('article',[_c('mavon-editor',{ref:\"md\",attrs:{\"fontSize\":\"18px\",\"codeStyle\":_vm.post.codestyle,\"boxShadow\":false,\"tabSize\":4},on:{\"fullScreen\":_vm.changezindex,\"change\":_vm.change_render_value,\"imgAdd\":_vm.$imgAdd,\"imgDel\":_vm.$imgDel},model:{value:(_vm.post.body_md),callback:function ($$v) {_vm.$set(_vm.post, \"body_md\", $$v)},expression:\"post.body_md\"}})],1)]),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"codestyle\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择代码风格\"},model:{value:(_vm.post.codestyle),callback:function ($$v) {_vm.$set(_vm.post, \"codestyle\", $$v)},expression:\"post.codestyle\"}},_vm._l((_vm.codestylelist),function(item,index){return _c('Option',{key:index,attrs:{\"value\":item}},[_vm._v(_vm._s(item))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"category\"}},[_c('Select',{attrs:{\"placeholder\":\"请选择文章分类\"},model:{value:(_vm.category.id),callback:function ($$v) {_vm.$set(_vm.category, \"id\", $$v)},expression:\"category.id\"}},_vm._l((_vm.categoryList),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"tag\"}},[_c('Select',{attrs:{\"multiple\":\"\",\"max-tag-count\":4,\"placeholder\":\"请选择文章标签\"},model:{value:(_vm.tagseleted),callback:function ($$v) {_vm.tagseleted=$$v},expression:\"tagseleted\"}},_vm._l((_vm.tagList),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}),1)],1),_vm._v(\" \"),_c('p',{staticStyle:{\"margin\":\"-15px 0 15px\"}},[_c('Button',{attrs:{\"long\":\"\"},on:{\"click\":_vm.addtag}},[_vm._v(\"没有标签？点击增加标签\")])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"prop\":\"can_comment\",\"label\":\"是否开启评论\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.post.can_comment),callback:function ($$v) {_vm.$set(_vm.post, \"can_comment\", $$v)},expression:\"post.can_comment\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"是否来自转载\"}},[_c('i-switch',{attrs:{\"size\":\"large\"},model:{value:(_vm.post.reproduce),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce\", $$v)},expression:\"post.reproduce\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"On\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"Off\")])])],1),_vm._v(\" \"),(_vm.post.reproduce)?_c('FormItem',{attrs:{\"prop\":\"url\"}},[_c('Input',{attrs:{\"type\":\"url\",\"clearable\":\"\",\"placeholder\":\"请输入转载来源地址\"},model:{value:(_vm.post.reproduce_source),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce_source\", $$v)},expression:\"post.reproduce_source\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.post.reproduce_source)+\"\\n          \")])],1):_c('FormItem',{attrs:{\"prop\":\"url\"}},[_c('Input',{attrs:{\"type\":\"url\",\"disabled\":\"\",\"clearable\":\"\",\"placeholder\":\"请输入转载来源地址\"},model:{value:(_vm.post.reproduce_source),callback:function ($$v) {_vm.$set(_vm.post, \"reproduce_source\", $$v)},expression:\"post.reproduce_source\"}})],1),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"long\":\"\",\"disabled\":_vm.isDisable},on:{\"click\":function($event){return _vm.updatepost('post')}}},[_vm._v(\"更新文章\")])],1)],1)],1),_vm._v(\" \"),_c('SuspensionPanel')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-33930be2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/post/PostEdit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33930be2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./PostEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PostEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./PostEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33930be2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./PostEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33930be2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/post/PostEdit.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/core-js/get-iterator.js\n// module id = HzJ8\n// module chunks = 4","import store from '../../store/store'\r\nimport vue from '../../main'\r\n\r\n\r\nimport Cookie from 'vue-cookies'\r\n\r\nconst authenticate = {\r\n  ifLogin() {\r\n    let authflag = vue.$store.state.userinfo.username;\r\n    if (authflag) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  },\r\n  ifCurrentUser(postauthor) {\r\n    if (this.ifLogin()) {\r\n      let authuser = vue.$store.state.userinfo.username;\r\n      if (postauthor == authuser) {\r\n        return true\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nexport default authenticate\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/authenticate.js","module.exports = __webpack_public_path__ + \"static/img/pikapi.c11d4b5.gif\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/pikapi.gif\n// module id = jDCx\n// module chunks = 4","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.9@core-js/library/fn/get-iterator.js\n// module id = l+I1\n// module chunks = 4","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_core-js@2.6.9@core-js/library/modules/core.get-iterator.js\n// module id = o6D2\n// module chunks = 4"],"sourceRoot":""}