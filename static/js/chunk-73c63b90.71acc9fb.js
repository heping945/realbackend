(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73c63b90"],{"1dde":function(t,e,n){var r=n("d039"),o=n("b622"),i=n("2d00"),u=o("species");t.exports=function(t){return i>=51||!r((function(){var e=[],n=e.constructor={};return n[u]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"3b85":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"commonpositiontop p-container",staticStyle:{"z-index":"199"}},[n("Row",[n("Col",{attrs:{xs:24,sm:24,md:0,lg:0}},[n("div",{staticStyle:{"text-align":"center",padding:"100px 100px"}},[n("h3",{staticStyle:{"font-size":"2rem",color:"rebeccapurple"}},[t._v("此设备不支持编辑文章请更换大设备")])])]),n("Col",{attrs:{xs:0,sm:0,md:24,lg:24}},[n("Select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择专题标题"},on:{"on-change":t.getsubjectsummary},model:{value:t.topicselect,callback:function(e){t.topicselect=e},expression:"topicselect"}},t._l(t.subjectlist,(function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])})),1),t.summary.length?n("Alert",{staticStyle:{"margin-top":"20px"},attrs:{type:"success"}},[n("List",t._l(t.summary,(function(e,r){return n("ListItem",{key:e.id,nativeOn:{click:function(n){return t.updatechapter(e)}}},[n("b",[t._v(t._s(r+1))]),t._v("： "),n("b",{staticStyle:{color:"#007fff"}},[t._v(t._s(e.order))]),t._v("： "),n("b",{staticStyle:{color:"rebeccapurple"}},[t._v(t._s(e.id))]),t._v("： "+t._s(e.title)+" ")])})),1)],1):t._e(),n("Alert",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning"}},[t._v("权限，顺序控制请联系管理")]),n("Upload",{attrs:{action:t.url,format:["md"],data:t.uploaddata,name:"md_File",paste:!0,multiple:!0,accept:".md","on-success":t.getmd,"on-error":t.prerr,headers:t.h,"before-upload":t.validatetopic}},[n("div",{staticStyle:{padding:"10px 0"}},[n("Button",{staticStyle:{margin:"0 auto"},attrs:{icon:"ios-cloud-upload-outline",title:"只能选择md格式文件，可以多选",long:""}},[t._v("上传md文件")])],1)])],1)],1),n("Modal",{attrs:{title:"请输入更改信息","ok-text":"更新"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[n("Form",{attrs:{"label-width":50}},[n("FormItem",{attrs:{label:"标题"}},[n("Input",{attrs:{placeholder:"Enter title...",maxlength:64},model:{value:t.chaptertitle,callback:function(e){t.chaptertitle="string"===typeof e?e.trim():e},expression:"chaptertitle"}})],1),n("FormItem",{attrs:{label:"顺序"}},[n("InputNumber",{staticStyle:{width:"100%"},attrs:{max:200,min:0,placeholder:"Enter order..."},model:{value:t.chapterorder,callback:function(e){t.chapterorder=e},expression:"chapterorder"}})],1)],1)],1)],1)},o=[],i=(n("4de4"),n("c975"),n("a434"),n("4ec3")),u={name:"SubjectManage",data:function(){return{header:{},subjectlist:[],topicselect:"",summary:[],modal1:!1,value:"",chaptertitle:"",chapterorder:null,chapterid:null}},computed:{url:function(){var t="";return t="https://zhaoheping.com/api/v1/chapters/",t},h:function(){var t=this.$store.state.userinfo.token;if(t)return this.header["Authorization"]="JWT "+t,this.header},uploaddata:function(){var t={};return t["topic"]=this.topicselect,t}},created:function(){this.initsubjectlist()},methods:{initsubjectlist:function(){var t=this;Object(i["t"])().then((function(e){t.subjectlist=e.data.results})).catch((function(t){console.log(t)}))},getsubjectsummary:function(t){var e=this;Object(i["n"])({topic:t}).then((function(t){console.log(t),e.summary=t.data.results})).catch((function(t){console.log(t.response)}))},updatechapter:function(t){console.log(t),this.chaptertitle=t.title,this.chapterorder=t.order,this.chapterid=t.id,this.modal1=!0},ok:function(){var t=this;this.chaptertitle&&this.chapterorder?Object(i["D"])({id:this.chapterid,title:this.chaptertitle,order:this.chapterorder}).then((function(e){console.log(e),console.log(t.summary),t.summary=t.summary.filter((function(e){return e.id!=t.chapterid}));var n=t.summary.filter((function(t){return t.order==e.data.order}));if(n.length){var r=n[0],o=t.summary.indexOf(r);t.summary.splice(o,0,e.data),t.$Message.success("更新成功")}else{var i=t.summary.indexOf(t.summary.filter((function(t){return t.order>e.data.order}))[0]);console.log(i),-1!=i?t.summary.splice(i,0,e.data):t.summary.push(e.data),t.$Message.success("更新成功")}})).catch((function(e){t.$Message.error("输入错误，请检查输入类型（order只能为正整数）")})):this.$Message.warning("无效输入，请检查")},cancel:function(){},getmd:function(t,e,n){console.log(t),console.log(t.id);var r=this.summary.filter((function(e){return e.id==t.id}));r.length?this.$Notice.warning({title:"请勿重复上传",duration:1}):(this.$Notice.success({title:"上传成功",duration:1}),this.summary.push(t)),console.log(e),console.log(n)},prerr:function(t,e,n){this.$Message.error(e.detail)},validatetopic:function(){if(!this.topicselect)return this.$Message.warning("请选择一个专题"),!1;var t=this.$store.state.userinfo.username;return console.log(t),"heping"!=t?(this.$Message.error("您没有权限!!!请联系管理员开通权限"),!1):void 0}}},c=u,a=(n("f7cb"),n("2877")),s=Object(a["a"])(c,r,o,!1,null,"19eb8db2",null);e["default"]=s.exports},"4de4":function(t,e,n){"use strict";var r=n("23e7"),o=n("b727").filter,i=n("1dde"),u=n("ae40"),c=i("filter"),a=u("filter");r({target:"Array",proto:!0,forced:!c||!a},{filter:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},"4ec3":function(t,e,n){"use strict";n("d3b7");var r=n("cebe"),o=n.n(r),i=n("07a4"),u="https://zhaoheping.com/api/v1/",c=o.a.create({baseURL:u,timeout:1e4});c.interceptors.request.use((function(t){var e=i["a"].state.userinfo.token;return e&&(t.headers["Authorization"]="JWT "+e),t}),(function(t){return Promise.reject(t)}));var a=c;n.d(e,"z",(function(){return s})),n.d(e,"B",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"p",(function(){return d})),n.d(e,"r",(function(){return p})),n.d(e,"e",(function(){return h})),n.d(e,"E",(function(){return m})),n.d(e,"v",(function(){return g})),n.d(e,"x",(function(){return v})),n.d(e,"g",(function(){return b})),n.d(e,"A",(function(){return y})),n.d(e,"y",(function(){return x})),n.d(e,"a",(function(){return S})),n.d(e,"h",(function(){return w})),n.d(e,"j",(function(){return _})),n.d(e,"C",(function(){return O})),n.d(e,"b",(function(){return k})),n.d(e,"k",(function(){return A})),n.d(e,"G",(function(){return j})),n.d(e,"o",(function(){return C})),n.d(e,"c",(function(){return M})),n.d(e,"i",(function(){return $})),n.d(e,"t",(function(){return E})),n.d(e,"u",(function(){return z})),n.d(e,"n",(function(){return I})),n.d(e,"m",(function(){return R})),n.d(e,"D",(function(){return F})),n.d(e,"d",(function(){return J})),n.d(e,"w",(function(){return T})),n.d(e,"f",(function(){return B})),n.d(e,"q",(function(){return L})),n.d(e,"s",(function(){return N})),n.d(e,"F",(function(){return q}));var s=function(t){return a.post("login/",t)},l=function(t){return a.post("users/",t)},f=function(t){return"slug"in t?a.get("/categories/"+t.slug+"/"):a.get("/categories/",t)},d=function(t){return a.get("/posts/",{params:t})},p=function(t){return a.get("/posts/"+t.id,t)},h=function(t){return a.post("/posts/",t)},m=function(t){return a.put("/posts/"+t.id+"/",t)},g=function(t){return a.get("/categories/",t)},v=function(t){return a.get("/tags/",t)},b=function(t){return a.post("/tags/",t)},y=function(t){return a.post("/postimg/",t,{headers:{"Content-Type":"multipart/form-data"}})},x=function(t){return a.get("/users/"+t.username,t)},S=function(t){return a.post("/userfavs/",t)},w=function(t){return a.delete("/userfavs/"+t+"/")},_=function(){return a.get("/userfavs/")},O=function(t){return a.get("/"+t.type+"/",{params:t.keyword})},k=function(t){return a.post("/uservote/",t)},A=function(){return a.get("/uservote/")},j=function(t){return a.put("/uservote/"+t.id+"/",t)},C=function(t){return a.get("/comments/",{params:t})},M=function(t){return a.post("/comments/",t)},$=function(t){return a.delete("/comments/"+t.id+"/",t)},E=function(t){return a.get("/topics/",{params:t})},z=function(t){return a.get("/topics/"+t.urltag,t)},I=function(t){return a.get("/chapters/",{params:t})},R=function(t){return a.get("/chapters/"+t.id,t)},F=function(t){return a.patch("/chapters/"+t.id+"/",t)},J=function(t){return a.post("/messages/",t)},T=function(t){return a.get("/info/"+t.id+"/",t)},B=function(t){return a.post("/dwz/",t)},L=function(t){return a.get("/dwz/"+t.arg,t)},N=function(t){return a.get("/users/"+t.username+"/",t)},q=function(t){return a.patch("/users/"+t.username+"/",t)}},"65f0":function(t,e,n){var r=n("861d"),o=n("e8b5"),i=n("b622"),u=i("species");t.exports=function(t,e){var n;return o(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[u],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},"7a70":function(t,e,n){},8418:function(t,e,n){"use strict";var r=n("c04e"),o=n("9bf2"),i=n("5c6c");t.exports=function(t,e,n){var u=r(e);u in t?o.f(t,u,i(0,n)):t[u]=n}},a434:function(t,e,n){"use strict";var r=n("23e7"),o=n("23cb"),i=n("a691"),u=n("50c4"),c=n("7b0b"),a=n("65f0"),s=n("8418"),l=n("1dde"),f=n("ae40"),d=l("splice"),p=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var n,r,l,f,d,p,b=c(this),y=u(b.length),x=o(t,y),S=arguments.length;if(0===S?n=r=0:1===S?(n=0,r=y-x):(n=S-2,r=m(h(i(e),0),y-x)),y+n-r>g)throw TypeError(v);for(l=a(b,r),f=0;f<r;f++)d=x+f,d in b&&s(l,f,b[d]);if(l.length=r,n<r){for(f=x;f<y-r;f++)d=f+r,p=f+n,d in b?b[p]=b[d]:delete b[p];for(f=y;f>y-r+n;f--)delete b[f-1]}else if(n>r)for(f=y-r;f>x;f--)d=f+r-1,p=f+n-1,d in b?b[p]=b[d]:delete b[p];for(f=0;f<n;f++)b[f+x]=arguments[f+2];return b.length=y-r+n,l}})},a640:function(t,e,n){"use strict";var r=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&r((function(){n.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,n){var r=n("83ab"),o=n("d039"),i=n("5135"),u=Object.defineProperty,c={},a=function(t){throw t};t.exports=function(t,e){if(i(c,t))return c[t];e||(e={});var n=[][t],s=!!i(e,"ACCESSORS")&&e.ACCESSORS,l=i(e,0)?e[0]:a,f=i(e,1)?e[1]:void 0;return c[t]=!!n&&!o((function(){if(s&&!r)return!0;var t={length:-1};s?u(t,1,{enumerable:!0,get:a}):t[1]=1,n.call(t,l,f)}))}},b727:function(t,e,n){var r=n("0366"),o=n("44ad"),i=n("7b0b"),u=n("50c4"),c=n("65f0"),a=[].push,s=function(t){var e=1==t,n=2==t,s=3==t,l=4==t,f=6==t,d=5==t||f;return function(p,h,m,g){for(var v,b,y=i(p),x=o(y),S=r(h,m,3),w=u(x.length),_=0,O=g||c,k=e?O(p,w):n?O(p,0):void 0;w>_;_++)if((d||_ in x)&&(v=x[_],b=S(v,_,y),t))if(e)k[_]=b;else if(b)switch(t){case 3:return!0;case 5:return v;case 6:return _;case 2:a.call(k,v)}else if(l)return!1;return f?-1:s||l?l:k}};t.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6)}},c975:function(t,e,n){"use strict";var r=n("23e7"),o=n("4d64").indexOf,i=n("a640"),u=n("ae40"),c=[].indexOf,a=!!c&&1/[1].indexOf(1,-0)<0,s=i("indexOf"),l=u("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:a||!s||!l},{indexOf:function(t){return a?c.apply(this,arguments)||0:o(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,n){var r=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},f7cb:function(t,e,n){"use strict";var r=n("7a70"),o=n.n(r);o.a}}]);